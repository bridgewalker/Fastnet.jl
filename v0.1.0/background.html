<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Background · Fastnet.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://bridgewalker.github.io/Fastnet.jl/stable/background.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/><script src="assets/myjs.js"></script><link href="assets/mystyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Fastnet.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Welcome</a></li><li><a class="tocitem" href="tutorial.html">Tutorial</a></li><li><a class="tocitem" href="concepts.html">Key Concepts</a></li><li><a class="tocitem" href="reference.html">Function Reference</a></li><li class="is-active"><a class="tocitem" href="background.html">Background</a><ul class="internal"><li><a class="tocitem" href="#How-to-simulate-processes-on-networks"><span>How to simulate processes on networks</span></a></li><li><a class="tocitem" href="#The-Gillespie-Algorithms"><span>The Gillespie Algorithms</span></a></li><li><a class="tocitem" href="#Making-it-fast"><span>Making it fast</span></a></li></ul></li><li><a class="tocitem" href="faq.html">FAQs</a></li><li><a class="tocitem" href="customization.html">Customization</a></li><li><a class="tocitem" href="about.html">About</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="background.html">Background</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="background.html">Background</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Background-Event-driven-simulation"><a class="docs-heading-anchor" href="#Background-Event-driven-simulation">Background - Event driven simulation</a><a id="Background-Event-driven-simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Background-Event-driven-simulation" title="Permalink"></a></h1><p>This section contains some background information about the way in which fastnet simulates networks. You won&#39;t need to know any of this to use Fastnet, but if you are interested what is under the hood, please read on. </p><h2 id="How-to-simulate-processes-on-networks"><a class="docs-heading-anchor" href="#How-to-simulate-processes-on-networks">How to simulate processes on networks</a><a id="How-to-simulate-processes-on-networks-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-simulate-processes-on-networks" title="Permalink"></a></h2><p>If we think about simulating processes on networks, the first idea that usualluy comes to mind are to update all nodes simulataneously in small time steps. This idea is attractive because it makes thinking about the simulation seemingly easier, however it entails a number of problemns</p><ol><li>Update order – How do we actually implement our timesteps? Do we update every node in every timestep? And if so in which order do we update them. If the order is always the same we will create artifacts (unrealistic artifical behavior), so we need to randomize. But such randomization can lead to further problems, for instance do we keep track of who has already been updated etc.  </li></ol><ol><li>Collisions – What do we do if different events that occur in one timestep are contradictory? For example what if a node in an epidemic situation infects another node and recovers from the disease at the same time. Does the infection always go first? Or can the recovery occur first making the infection event impossible? </li></ol><ol><li>Timeing artifacts – Even if we find elegant solutions for event collisions and update order, we are still approximating a real-word system in which time flows continously by a model in which time proceeds in discrete steps. This in itself can cause some artifacts. For example it can lead to the formation of certain patterns which won&#39;t occur in the continuous time system.  </li></ol><ol><li>Efficiency – The most common solution to the problems above is to make timesteps tiny. While this lessens the impact of the artifacts it does not prevent them altogether. Moreover, it comes at a high coast in terms of efficiency. We will need to simulate many timesteps to cover the desired stretch of time, and in each of these steps we will be checking a large number of nodes for possible updates. However, since out timesteps are now tiny the probability that a given node is affected by an event in a given timestep is tiny, often in below 1 in a million. This means we spent a lot of computation time to do updates on nodes in which nothing changes at all.  </li></ol><p>Simulations that work with discrete timesteps can still be a good idea if the underlying system fundamentally works in discrete timesteps. However, in the vast majority of cases we can simulate systems better, faster, and more elgantly by not using timesteps at all...</p><h2 id="The-Gillespie-Algorithms"><a class="docs-heading-anchor" href="#The-Gillespie-Algorithms">The Gillespie Algorithms</a><a id="The-Gillespie-Algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#The-Gillespie-Algorithms" title="Permalink"></a></h2><p>In 1976 Daniel T. Gillespie published the idea for an event-driven simulation algorithm</p><pre><code class="nohighlight hljs">Gillespie (1976). &quot;A General Method for Numerically Simulating the Stochastic Time Evolution of Coupled Chemical Reactions&quot;. Journal of Computational Physics. 22 (4): 403–434.</code></pre><p>The basic idea is that the simulation code will consider the system and then determine (stochastically) which event will happen next in the system and at which time this event will occur. The simulation then jumps forward directly to the time point where the next event occurs and implements the consequences of this event. Once the model has been updated in this way the simulation considers it again to determine what the next event is, and so on. </p><p>With Gillespie&#39;s algorithm events can never collide. Moreover there can be no articfacts due to timesteps, because there are no discrete timesteps. Also, the simulation is highly efficient because no time is wasted between events.  As a result Gillespie-style event-driven simulations combine excellent performance with a high degree of realism. </p><h2 id="Making-it-fast"><a class="docs-heading-anchor" href="#Making-it-fast">Making it fast</a><a id="Making-it-fast-1"></a><a class="docs-heading-anchor-permalink" href="#Making-it-fast" title="Permalink"></a></h2><p>The heart of any event driven simulation are a number of functions. One of these is used to calculate the rates at which processes occur given the state in the system (the <em>rates!</em> function). The others implement the individual processes that can occur in the system. </p><p>The key to making event-driven simulations fast is to make sure that these core functions can run without needing to consider (e.g. without needing to iterate over all network nodes). Fastnet makes achieves this by clever bookkeeping that makes use of an innovative data structure. Using this bookkeeping, the tools one needs in a network simulation such as </p><ul><li>finding the number of nodes or links in a certain state, </li><li>randomly picking a node of link in a certain state at random,  </li><li>creating or removing nodes or links</li><li>changing the state of nodes</li></ul><p>can all be implemented such that their runtimes is independent of the number of nodes or links in the network. In Fastnet all of these functions either run in constant time, or scale only with the degree of the affected node and the number of states. </p><p>The basic idea for the bookkeeping used in Fastnet was born while we were working on the following publication:</p><pre><code class="nohighlight hljs">T. Gross, C.J. Dommar D’Lima and B. Blasius (2006) &quot;Epidemic dynamics on an adaptive network.&quot; Phys. Rev. Lett. 96, 208701.</code></pre><p>The underlying datastructure that makes the bookkeeping possible is also available in Julia, on its own in the <a href="https://github.com/bridgewalker/Repos.jl">Repos package</a> Fastnet does not use this package but rather reimplements the Repos structure in an opimized way for its current application. </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="reference.html">« Function Reference</a><a class="docs-footer-nextpage" href="faq.html">FAQs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Tuesday 31 August 2021 07:32">Tuesday 31 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
